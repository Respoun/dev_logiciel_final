{% extends"layout.html" %}
{%block content %}

<script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.5.1/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/select/1.2.5/js/dataTables.select.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://editor.datatables.net/extensions/Editor/js/dataTables.editor.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>


  <table id="livre" class="display" style="width:100%">
    <thead>
      <tr>
        <th>Id livre</th>
        <th>Titre</th>
        <th>Auteur</th>
        <th>Description</th>
        <th>Theme</th>
        <th>Code</th>
        <th>ISBN</th>
      </tr>
    </thead>
  </table>

<script>
  var dataset = '{{ response|tojson }}';
  var strObj = dataset;
  var jsonStr = strObj.replace(/(\w+:)|(\w+ :)/g, function(s) {
    return '"' + s.substring(0, s.length-1) + '":';
  });
  var obj = JSON.parse(jsonStr);

  $(document).ready(function() {
    $('#livre').DataTable({
        "pageLength": 25,
        data: obj,
        "columns": [
        { "data": 'idlivre' },
        { "data": 'titre' },
        { "data": 'name' },
        { "data": 'description' },
        { "data": 'theme' },
        { "data": 'code' },
        { "data": 'isbn' }
      ],
      'fnRowCallback' : function(row, data, dataIndex, dataIndexFull) {
          $(row).css('background-color', '#e9ecef');
      },
    });
});

</script>

{% endblock content %}
